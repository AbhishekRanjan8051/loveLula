<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="../style/navbar.css" />
    <link rel="stylesheet" href="../style/footer.css" />
    <link rel="stylesheet" href="../style/login.css" />
  </head>
  <body>
    <div class="main">
      <h1 class="maincous">Existing Customers</h1>
      <div class="dotted"></div>

      <p>
        Login to your account with your details below or register as a LoveLula
        customer to gain access to an exclusive range of benefits.
      </p>

      <div class="formmaincontainer">
        <div class="one">
          <form action="" id="login-form">
            <label for="username"
              >username
              <input
                type="text"
                id="username"
                name="username"
                placeholder="username"
            /></label>

            <div class="reftoregisterpage">
              <a href="../../views/register.ejs"
                >Don't have an account? Create one now</a
              >.
            </div>
            <label for="password"
              >password
              <input
                type="text"
                id="password"
                name="password"
                placeholder="Password"
            /></label>
            <button class ="btn" ><a href="/">login</a></button>
            <!-- <input type="submit" class="button" id="sub" value="Login" /> -->
          </form>
        </div>
        <div class="two"></div>
      </div>
    </div>
  </body>
</html>

<script type="module">
  import footer from "../js/footer.js";

  let div = document.createElement("div");

  div.innerHTML = footer();
  document.body.append(div);
</script>

<script type="module">
  import navbar from "../js/navbar.js";

  let div = document.createElement("div");

  div.innerHTML = navbar();
  document.body.prepend(div);
</script>
<script>
  const form = document.getElementById("login-form");

  let btn = document.createElement("sub");

  form.addEventListener("submit", registerUser);

  async function registerUser(event) {
    // event.preventDefault();

    let username = document.getElementById("username").value;

    let password = document.getElementById("password").value;

    // const confirmpassword = document.getElementById("confirmpassword").value;

    const result = await fetch("http://localhost:2345/users", {
      method: "get",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({
        username,
        password,
      }),
    }).then((res) => res.json());
    console.log("result:", result);

    if (username == result.username) window.location.href = "www.google.com";
  }
</script>
